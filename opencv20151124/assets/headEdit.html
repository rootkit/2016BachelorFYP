<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>双人编辑</title>
	<!--script_file-->
	<script src="lib/d3.v3.min.js"></script>
	<script src="lib/zepto.min.js"></script>
	<!--绘制bubble-->
	<script src="js/dataparse.js"></script>
	<script src="js/personchange.js"></script>
	<!--数据导入-->
	<script src="data/bodyData.js"></script>
	<script src="data/faceData.js"></script>
	<script src="data/mouthData.js"></script>
	<script src="data/hairData.js"></script>
	<script src="data/eyeData.js"></script>
	<script src="data/eyebrowData.js"></script>
	<script src="data/noseData.js"></script>
	<script src="data/glassData.js"></script>
	<script src="data/hatData.js"></script>
	<script src="data/bubbleData.js"></script>
	<script src="data/clothData.js"></script>
	<script src="data/backgroundData.js"></script>
	<script src="data/hobbyData.js"></script>
	<script src="data/featureData.js"></script>
	<script src="data/expressData.js"></script>
	<!--css_file-->
	<link href="css/reset.css" type="text/css" rel="stylesheet" />
	<link href="css/edit.css" type="text/css" rel="stylesheet" />
	<style>
		.pathS{
			fill-rule:evenodd;
			clip-rule:evenodd;
		}
	</style>
</head>
<body>
	<div id="contentDIV">
	<script>
		personInitA()
	</script>
	</div>
	

<script>
var sexTag = {
    id: 0
};
var bodyTag = {
    id: 1
};
var faceTag = {
    id: 1,
    color: "#F4CDA7",
    x: 0,
    y: 0
};
var eyebrowTag = {
    id: 29,
    x: 0,
    y: 0
};
var glassTag = {
    id: 0,
    x: 0,
    y: 0
};
var bubbleTag = {
    id: 0,
    x: 0,
    y: 0
};
var hatTag = {
    id: 0,
    x: 0,
    y: 0
};
var featureTag = {
    id: 0,
    x: 0,
    y: 0
};
var backgroundTag = {
    id: 29,
    x: 0,
    y: 0
};
var clothTag = {
    id: 1,
    x: 0,
    y: 0
};
var eyeTag = {
    id: 5,
    x: 0,
    y: 0
};
var hobbyTag = {
    id: 5,
    x: 0,
    y: 0
};
var hairTag = {
    id: 48,
    color: "#F29600",
    x: 0,
    y: 0
};
var mouthTag = {
    id: 12,
    x: 0,
    y: 0
};
var expressTag = {
    id: 0,
    x: 0,
    y: 0
};
var noseTag = {
    id: 0,
    x: 0,
    y: 0
};
var sexTagB = {
    id: 0
};
var bodyTagB = {
    id: 1
};
var faceTagB = {
    id: 1,
    color: "#F4CDA7",
    x: 0,
    y: 0
};
var eyebrowTagB = {
    id: 29,
    x: 0,
    y: 0
};
var glassTagB = {
    id: 0,
    x: 0,
    y: 0
};
var bubbleTagB = {
    id: 0,
    x: 0,
    y: 0
};
var hatTagB = {
    id: 0,
    x: 0,
    y: 0
};
var featureTagB = {
    id: 0,
    x: 0,
    y: 0
};
var backgroundTagB = {
    id: 29,
    x: 0,
    y: 0
};
var clothTagB = {
    id: 1,
    x: 0,
    y: 0
};
var eyeTagB = {
    id: 5,
    x: 0,
    y: 0
};
var hobbyTagB = {
    id: 5,
    x: 0,
    y: 0
};
var hairTagB = {
    id: 48,
    color: "#F29600",
    x: 0,
    y: 0
};
var mouthTagB = {
    id: 12,
    x: 0,
    y: 0
};
var expressTagB = {
    id: 0,
    x: 0,
    y: 0
};
var noseTagB = {
    id: 0,
    x: 0,
    y: 0
};
var svgWidth = 640;
var svgHeight = 640;
var winWidth = $(window).get(0).innerWidth;
var winHeight = $(window).get(0).innerHeight;
var minWidth = winWidth < winHeight ? winWidth: winHeight;
var svg = d3.select("#contentDIV").append("svg").attr("xmlns", "http://www.w3.org/2000/svg").attr("version", "1.1").attr("id", "contentSVG").attr("width", svgWidth).attr("height", svgHeight).attr("viewBox", "0 0 " + svgWidth + " " + svgHeight).attr("xml:space", "preserve");
var background2 = svg.append("g").attr("id", "background2");
var background3 = svg.append("g").attr("id", "background3");
var background = svg.append("g").attr("id", "background");
var roleA = svg.append("g").attr("id", "roleA");
var personSVG = roleA.append("g").attr("id", "person");
var backHairSVG = personSVG.append("g").attr("id", "backHairSVG");
var bodySVG = personSVG.append("g").attr("id", "body");
var headSVG = personSVG.append("g").attr("id", "head");
var hobby = roleA.append("g").attr("id", "hobby");
var bubble = roleA.append("g").attr("id", "bubble");
var backHair = backHairSVG.append("g").attr("id", "backHair");
var middleHair = headSVG.append("g").attr("id", "middleHair");
var face = headSVG.append("g").attr("id", "face");
var facial = headSVG.append("g").attr("id", "facial");
var eyebrow = facial.append("g").attr("id", "eyebrow");
var mouth = facial.append("g").attr("id", "mouth");
var eye = facial.append("g").attr("id", "eye");
var nose = facial.append("g").attr("id", "nose");
var express = headSVG.append("g").attr("id", "express");
var feature = headSVG.append("g").attr("id", "feature");
var frontHair = headSVG.append("g").attr("id", "frontHair");
var express2 = headSVG.append("g").attr("id", "express2");
var glass = headSVG.append("g").attr("id", "glass");
var hat = headSVG.append("g").attr("id", "hat");
var body = bodySVG.append("g").attr("id", "body");
var cloth = bodySVG.append("g").attr("id", "cloth");

function initHeadEdit(personTag1) {
    var personTagAll, person1Tag;
    if (typeof personTag1 == "string") {
        personTagAll = eval("(" + personTag1 + ")");
        person1Tag = personTagAll.personTagA
    } else {
        person1Tag = personTag1
    }
    recordTag(person1Tag);
    personInitA();
    resizeSVG();
    $(window).resize(function() {
        d3.select("#contentSVG").attr("width", $(window).get(0).innerWidth).attr("height", $(window).get(0).innerHeight)
    });
    setTimeout(resizeSVG, 30)
}
function personSelect() {
    $("#roleA").on("click",
    function() {
        alert("AAAAAA")
    })
}
function partTranslate(b, a, c) {
    window[b].attr("transform", "translate(" + a + "," + c + ")")
}
function personInitA() {
    bodyChange(1);
    hairChange(hairTag.id);
    mouthChange(mouthTag.id);
    eyeChange(eyeTag.id);
    eyebrowChange(eyebrowTag.id);
    noseChange(noseTag.id);
    expressChange(expressTag.id);
    faceChange(faceTag.id);
    hatChange(hatTag.id);
    backgroundChange(backgroundTag.id);
    hobbyChange(hobbyTag.id);
    clothChange(clothTag.id);
    bubbleChange(bubbleTag.id);
    featureChange(featureTag.id);
    glassChange(glassTag.id)
}
function recordTag(a, b) {
    sexTag.id = a.sexual.id;
    hairTag.id = a.hair.id;
    hairTag.color = a.hair.color;
    faceTag.id = a.face.id;
    faceTag.color = a.face.color;
    mouthTag.id = a.mouth.id;
    eyeTag.id = a.eye.id;
    eyebrowTag.id = a.eyebrow.id;
    hatTag.id = a.hat.id;
    backgroundTag.id = a.background.id;
    hobbyTag.id = a.hobby.id;
    clothTag.id = a.cloth.id;
    bubbleTag.id = a.bubble.id;
    featureTag.id = a.feature.id;
    glassTag.id = a.glass.id;
    expressTag.id = a.express.id;
    noseTag.id = a.nose.id
}
function resizeSVG() {
    d3.select("#contentSVG").attr("width", $(window).get(0).innerWidth).attr("height", $(window).get(0).innerHeight)
}
function bubbleEdit(c) {
    var a = c.split("&el&");
    d3.selectAll(".bubbleEditText").style("white-space", "pre").text("");
    for (var b = 0; b < a.length; b++) {
        $("#bubbleEditText" + b).text(a[b])
    }
    if (a.length == 1) {
        d3.select("#bubbleEditText0").attr("y", 150)
    }
    if (a.length == 2) {
        d3.select("#bubbleEditText0").attr("y", 120);
        d3.select("#bubbleEditText1").attr("y", 180)
    }
    if (a.length == 3) {
        d3.select("#bubbleEditText0").attr("y", 80);
        d3.select("#bubbleEditText1").attr("y", 140);
        d3.select("#bubbleEditText2").attr("y", 200)
    }
};
</script>	
</body>
</html>